{"version":3,"file":"ngx-collapsible.es5.js","sources":["ts/ngx-collapsible.ts","ts/src/app/modules/collapsible/collapsible.module.ts","ts/src/app/modules/collapsible/collapsible.directive.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {CollapsibleModule} from './public_api';\n\nexport {CollapsibleDirective as Éµa} from './src/app/modules/collapsible/collapsible.directive';","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { CollapsibleDirective } from './collapsible.directive';\nexport class CollapsibleModule { static decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n  imports: [\n    CommonModule\n  ],\n  declarations: [CollapsibleDirective],\n  exports: [CollapsibleDirective],\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction CollapsibleModule_tsickle_Closure_declarations() {\n/** @type {?} */\nCollapsibleModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nCollapsibleModule.ctorParameters;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import { Directive, Input, OnChanges, SimpleChanges, AfterViewInit, ViewContainerRef } from '@angular/core';\nexport class CollapsibleDirective implements OnChanges, AfterViewInit {\n\n   accordion: false;\n   selected: string[] = [];\n\n   openHeaderClass = 'header-open';\n   openContentClass = 'content-open';\n   collapsedHeaderClass = 'header-collapsed';\n   collapsedContentClass = 'content-collapsed';\nprivate headers: HTMLElement[] = [];\nprivate contents: HTMLElement[] = [];\n/**\n * @param {?} viewContainer\n */\nconstructor(private viewContainer: ViewContainerRef) { }\n/**\n * @param {?} changes\n * @return {?}\n */\nngOnChanges(changes: SimpleChanges) {\n    if (this.accordion) { this.selected = this.selected.slice(0, 1); }\n    this.updateView();\n  }\n/**\n * @return {?}\n */\nngAfterViewInit() {\n    const /** @type {?} */ element = this.viewContainer.element.nativeElement;\n\n    this.headers = [].slice.call(element.querySelectorAll('[collapsible-header]'));\n    this.contents = [].slice.call(element.querySelectorAll('[collapsible-content]'));\n\n    this.headers.forEach(el => {\n      el.addEventListener('click', () => {\n\n        const /** @type {?} */ key = el.getAttribute('collapsible-header');\n        if (key === null) { return; }\n\n        if (this.accordion) {\n          this.toggleAccordion(key);\n        } else {\n          this.toggleCollapsible(key);\n        }\n\n        this.updateView();\n      });\n\n    });\n\n    this.updateView();\n  }\n/**\n * @param {?} key\n * @return {?}\n */\nprivate toggleCollapsible(key: string) {\n    const /** @type {?} */ index = this.selected.indexOf(key);\n    if (index === -1) {\n      this.selected.push(key);\n    } else {\n      this.selected.splice(index, 1);\n    }\n  }\nprivate toggleAccordion = (key: string) => {\n    if (this.selected[0] === key) {\n      this.selected = [];\n    } else {\n      this.selected = [key];\n    }\n  }\n/**\n * @return {?}\n */\nprivate updateView() {\n\n    this.headers.forEach(el => {\n      const /** @type {?} */ key = el.getAttribute('collapsible-header');\n      const /** @type {?} */ collapse = this.selected.indexOf(key) === -1;\n      this.toggleClasses(el, this.openHeaderClass, this.collapsedHeaderClass, collapse);\n    });\n\n    this.contents.forEach(el => {\n      const /** @type {?} */ key = el.getAttribute('collapsible-content');\n      const /** @type {?} */ collapse = this.selected.indexOf(key) === -1;\n      this.toggleClasses(el, this.openContentClass, this.collapsedContentClass, collapse);\n    });\n\n  }\nprivate toggleClasses = (element: HTMLElement, openClass: string, collapsedClass: string, isCollapsed = true) => {\n\n    const /** @type {?} */ allClasses = element.className.split(' ');\n\n    const /** @type {?} */ classToAdd = isCollapsed ? collapsedClass : openClass;\n    const /** @type {?} */ addIndex = allClasses.indexOf(classToAdd);\n    if (addIndex === -1) { allClasses.push(classToAdd); }\n\n    const /** @type {?} */ classToRemove = isCollapsed ? openClass : collapsedClass;\n    const /** @type {?} */ removeIndex = allClasses.indexOf(classToRemove);\n    if (removeIndex > -1) { allClasses.splice(removeIndex, 1); }\n\n    element.className = allClasses.join(' ');\n  }\n\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{\n  selector: '[ngxCollapsible]'\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ViewContainerRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'accordion': [{ type: Input },],\n'selected': [{ type: Input },],\n'openHeaderClass': [{ type: Input },],\n'openContentClass': [{ type: Input },],\n'collapsedHeaderClass': [{ type: Input },],\n'collapsedContentClass': [{ type: Input },],\n};\n}\n\nfunction CollapsibleDirective_tsickle_Closure_declarations() {\n/** @type {?} */\nCollapsibleDirective.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nCollapsibleDirective.ctorParameters;\n/** @type {?} */\nCollapsibleDirective.propDecorators;\n/** @type {?} */\nCollapsibleDirective.prototype.accordion;\n/** @type {?} */\nCollapsibleDirective.prototype.selected;\n/** @type {?} */\nCollapsibleDirective.prototype.openHeaderClass;\n/** @type {?} */\nCollapsibleDirective.prototype.openContentClass;\n/** @type {?} */\nCollapsibleDirective.prototype.collapsedHeaderClass;\n/** @type {?} */\nCollapsibleDirective.prototype.collapsedContentClass;\n/** @type {?} */\nCollapsibleDirective.prototype.headers;\n/** @type {?} */\nCollapsibleDirective.prototype.contents;\n/** @type {?} */\nCollapsibleDirective.prototype.toggleAccordion;\n/** @type {?} */\nCollapsibleDirective.prototype.toggleClasses;\n/** @type {?} */\nCollapsibleDirective.prototype.viewContainer;\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"],"names":[],"mappings":"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"}
